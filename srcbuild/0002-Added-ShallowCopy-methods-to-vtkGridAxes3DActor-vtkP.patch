From dd2e33d6db155c9f1476fb224fe5e4f866bfedf0 Mon Sep 17 00:00:00 2001
From: Utkarsh Ayachit <utkarsh.ayachit@kitware.com>
Date: Sun, 19 Jul 2015 21:55:12 -0400
Subject: [PATCH 2/3] Added ShallowCopy methods to
 vtkGridAxes3DActor/vtkPVGridAxes3DActor.

---
 .../VTKExtensions/Default/vtkGridAxes3DActor.cxx   | 34 ++++++++++++++++++++++
 .../VTKExtensions/Default/vtkGridAxes3DActor.h     |  4 +++
 .../VTKExtensions/Default/vtkPVGridAxes3DActor.cxx | 16 ++++++++++
 .../VTKExtensions/Default/vtkPVGridAxes3DActor.h   |  7 +++++
 4 files changed, 61 insertions(+)

diff --git a/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.cxx b/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.cxx
index 7b8c3e0..3b59b69 100644
--- a/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.cxx
+++ b/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.cxx
@@ -595,6 +595,40 @@ void vtkGridAxes3DActor::Update(vtkViewport* viewport)
 }
 
 //----------------------------------------------------------------------------
+void vtkGridAxes3DActor::ShallowCopy(vtkProp *prop)
+{
+  this->Superclass::ShallowCopy(prop);
+  vtkGridAxes3DActor* other = vtkGridAxes3DActor::SafeDownCast(prop);
+  if (other == NULL)
+    {
+    return;
+    }
+
+  this->SetGridBounds(other->GetGridBounds());
+  this->SetFaceMask(other->GetFaceMask());
+  this->SetLabelMask(other->GetLabelMask());
+  this->SetLabelUniqueEdgesOnly(other->GetLabelUniqueEdgesOnly());
+  this->SetGenerateGrid(other->GetGenerateGrid());
+  this->SetGenerateEdges(other->GetGenerateEdges());
+  this->SetGenerateTicks(other->GetGenerateTicks());
+  this->SetProperty(other->GetProperty());
+  for (int cc=0; cc < 3; cc++)
+    {
+    this->SetTitleTextProperty(cc, other->GetTitleTextProperty(cc));
+    this->SetTitle(cc, other->GetTitle(cc));
+    this->SetUseCustomLabels(cc, other->UseCustomLabels[cc]);
+    this->CustomLabels[cc]->DeepCopy(other->CustomLabels[cc].GetPointer());
+    this->SetLabelTextProperty(cc, other->GetLabelTextProperty(cc));
+    this->SetNotation(cc, other->GetNotation(cc));
+    this->SetPrecision(cc, other->GetPrecision(cc));
+    }
+  this->SetEnableLayerSupport(other->GetEnableLayerSupport());
+  this->SetBackgroundLayer(other->GetBackgroundLayer());
+  this->SetGeometryLayer(other->GetGeometryLayer());
+  this->SetForegroundLayer(other->GetForegroundLayer());
+}
+
+//----------------------------------------------------------------------------
 void vtkGridAxes3DActor::PrintSelf(ostream& os, vtkIndent indent)
 {
   this->Superclass::PrintSelf(os, indent);
diff --git a/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.h b/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.h
index c2821e5..e91c617 100644
--- a/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.h
+++ b/ParaViewCore/VTKExtensions/Default/vtkGridAxes3DActor.h
@@ -38,6 +38,10 @@ public:
   void PrintSelf(ostream& os, vtkIndent indent);
 
   // Description:
+  // Shallow copy from another vtkGridAxes3DActor.
+  virtual void ShallowCopy(vtkProp *prop);
+
+  // Description:
   // Set the bounding box defining the grid space. This, together with the
   // \c Face identify which planar surface this class is interested in. This
   // class is designed to work with a single planar surface.
diff --git a/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.cxx b/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.cxx
index 9f51c50..0e370fa 100644
--- a/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.cxx
+++ b/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.cxx
@@ -134,6 +134,22 @@ void vtkPVGridAxes3DActor::UpdateGridBoundsUsingDataBounds()
 }
 
 //----------------------------------------------------------------------------
+void vtkPVGridAxes3DActor::ShallowCopy(vtkProp *prop)
+{
+  this->Superclass::ShallowCopy(prop);
+  if (vtkPVGridAxes3DActor* other = vtkPVGridAxes3DActor::SafeDownCast(prop))
+    {
+    this->SetDataScale(other->GetDataScale());
+    this->SetDataPosition(other->GetDataPosition());
+    this->SetTransformedBounds(other->GetTransformedBounds());
+    this->SetUseModelTransform(other->GetUseModelTransform());
+    this->SetModelBounds(other->GetModelBounds());
+    this->SetModelTransformMatrix(
+      reinterpret_cast<double*>(other->ModelTransformMatrix->Element));
+    }
+}
+
+//----------------------------------------------------------------------------
 void vtkPVGridAxes3DActor::PrintSelf(ostream& os, vtkIndent indent)
 {
   this->Superclass::PrintSelf(os, indent);
diff --git a/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.h b/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.h
index 385b0d9..476f24d 100644
--- a/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.h
+++ b/ParaViewCore/VTKExtensions/Default/vtkPVGridAxes3DActor.h
@@ -47,9 +47,16 @@ public:
   void PrintSelf(ostream& os, vtkIndent indent);
 
   // Description:
+  // Shallow copy from another vtkPVGridAxes3DActor.
+  virtual void ShallowCopy(vtkProp *prop);
+
+  // Description:
   // Specify transformation used by the data.
   vtkSetVector3Macro(DataScale, double);
+  vtkGetVector3Macro(DataScale, double);
+
   vtkSetVector3Macro(DataPosition, double);
+  vtkGetVector3Macro(DataPosition, double);
 
   // Description:
   vtkSetVector6Macro(TransformedBounds, double);
-- 
1.8.0.msysgit.0

